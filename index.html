<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <link rel="stylesheet" href="css/style.css">
    <title>Čobanac</title>
</head>

<body>
    <nav>
        <div class="container">
            <div class="container2">
                <img src="images/cobanac_logo.jpg" width="110">
                <h2>Čobanac</h2>
            </div>

            <div class="menu">
                <a href="index.html" class="is-active">Početna</a>
                <a href="o_cobancu.html" class="is-inactive">O čobancu</a>
            </div>
        </div>
    </nav>

    <form class="form-group-form" style="text-align: center;">
        <label for="number">Unesite broj osoba za koje želite praviti čobanac:</label>
        <input type="number" id="number" min="5" max="100" name="number" required>
    </form>

    <div class="form-group-button" style="text-align: center">
        <button onclick="prikaziSastojke()" class="button" id="toggle_sastojci">Prikaži/Sakrij sastojke</button>
    </div>

    <div class="row">
        <div class="card" id="sastojci" style="display: none;">
            <h2 id="sastojci_h2">Potrebni sastojci</h2>
            <img class="card_image" src="images/sastojci.jfif">
            <p id="sastojci_p"> 
                Unesite broj osoba za izračun potrebnih sastojaka!
            </p>
        </div>
    </div>

    <div id = "demo-div" style="text-align: center; display: none;"></div>

    <script>
        var width = 600;
        var height = 600;
        var outerRadius = 200;
        var innerRadius = 50;

        var color = d3.scaleOrdinal(d3.schemeCategory10);

        var arc = d3.arc()
            .innerRadius(innerRadius)
            .outerRadius(outerRadius);
        
        var data = [
            {name: 'jabuka', value: 17},
            {name: 'kruska', value: 4},
            {name: 'banana', value: 83},
            {name: 'jagoda', value: 47},
            {name: 'ribizla', value: 1}
        ];

        var pie = d3.pie()
            .value(function(d) { return d.value; });
        
        var svg = d3.select("#demo-div")
            .append("svg")
            .attr("width", width)
            .attr("height", height);

        var pieArcs = svg.selectAll("g.pie")
            .data(pie(data))
            .enter()
            .append("g")
            .attr("class", "pie")
            .attr("transform", "translate(" + (width / 2) + ", " + (height / 2) + ")");

        pieArcs.append("path")
            .attr("fill", function(d, i) { return color(i); })
            .attr("d", arc);

        var label = d3.arc()
            .outerRadius(outerRadius)
            .innerRadius(0);
            
        pieArcs.append("text")
            .attr("transform", function(d) { return "translate(" + label.centroid(d) + ")"; }) 
            .attr("text-anchor", "middle")
           .text(function(d) { return `${d.data.name} ${d.data.value}`; })
           .style("font-family", "arial")
           .style("font-size", 15);

    </script>

    <div class="form-group-button" style="text-align: center">
        <button onclick="prikaziPostupak()" class="button" id="toggle_postupak">Prikaži/Sakrij postupak</button>
    </div>

    <div class="row">
        <div class="card" id="postupak" style="display: none;">
            <h2>Postupak</h2>
            <img class="card_image" src="images/postupak.jpeg">
            <h3>Priprema</h3>
            <p> 
                 - sitno isjeckati ili izblendati luk 
                <br> - naribati ili izblendati mrkvu, korjen peršina i korjen celera
                <br> - svo meso narezati na kockice jednake veličine
            </p>
            <h3><br>Postupak kuhanja</h3>
            <p>
                - 
            </p>
        </div>
    </div>

    <footer>
        <div class="footer-content">
            <h2>Čobanac</h2>
            <img src="images/cobanac_logo.jpg" alt="logo" width="150">
            <p>Copyright &copy; 2022 Petar Ivanković</p>
        </div>
    </footer>
</body>

<script>
    function prikaziSastojke(){
        var num = document.getElementById("number").value;
        var nog, rajcica;
        if(num.length != 0){
            if(num < 1) nog = 0, raj = 0;
            else if(num > 0 && num <=15) nog = 1, rajcica = 0.1;
            else if(num >= 16 && num <=30) nog = 2, rajcica = 0.2;
            else if(num >= 31 && num <=45) nog = 3, rajcica = 0.3;
            else if(num >= 46 && num <=60) nog = 4, rajcica = 0.4;
            else if(num >= 61 && num <=75) nog = 5, rajcica = 0.5;
            else if(num >= 76) nog = 6, rajcica = 0.6;
            var p = document.getElementById("sastojci_p");
            var h2 = document.getElementById("sastojci_h2");
            h2.innerHTML = "Potrebni sastojci za " + num + " osoba";
            var mesokg = Number((num*250)/1000).toFixed(2);

            //p element potrebnih sastojaka
            p.innerHTML = "- " + mesokg + " kg mesa (" + Number(0.3*mesokg).toFixed(2) + " kg divljači, " + 
            Number(0.3*mesokg).toFixed(2) + " kg junetine, " + Number(0.4*mesokg).toFixed(2) + " kg svinjetine)"
            + "<br>" + "- " + Number(mesokg/3).toFixed(2) + " kg luka" + "<br>" + "- " + Number((mesokg/3)/3).toFixed(2) + " kg korjenastog povrća ("
            + Number(((mesokg/3)/3)*0.6).toFixed(2) + " kg mrkve, " + Number(((mesokg/3)/3)*0.25).toFixed(2)
            + " kg peršina, " + Number(((mesokg/3)/3)*0.15).toFixed(2) + " kg celera)" + "<br>"
            + "- " + nog + " svinjska/ih nogica" + "<br>" + "- " + Number(mesokg*3).toFixed(2) + " g papra"
            + "<br>" + "- " + Number(mesokg*20).toFixed(2) + " g soli" + "<br>" + "- " + Number(mesokg*3).toFixed(2)
            + " g ljute paprike" + "<br>" + "- " + Number(mesokg*15).toFixed(2) + " g slatke paprike"
            + "<br>" + "- " + Number(num/5).toFixed(0) + " lovorov/a list/a"
            + "<br>" + "- " + Number((num/2)+(0.25*(num/2))).toFixed(2) + " L vode (" 
            + Number(((num/2)+(0.25*(num/2)))*0.125).toFixed(2) + " L mineralne vode)"
            + "<br>" + "- " + rajcica + " L pasirane rajčice";
        }

        var x = document.getElementById("sastojci");
        if (x.style.display === "none") {
            x.style.display = "block";
        } else {
            x.style.display = "none";
        }
    }
    function prikaziPostupak(){
        var x = document.getElementById("postupak");
        if (x.style.display === "none") {
            x.style.display = "block";
        } else {
            x.style.display = "none";
        }
    }

</script>

</html>
